<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Key to Text Opener</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body { font-family: Arial, sans-serif; padding: 20px; }
input, textarea, button { width: 100%; margin: 8px 0; padding: 10px; font-size: 16px; }
#output { margin-top: 20px; padding: 12px; border: 1px solid #aaa; white-space: pre-wrap; }
#linkBox { margin-top: 10px; font-size: 14px; word-break: break-all; }
</style>
</head>

<body>

<h2>Enter Key</h2>
<input id="keyInput" placeholder="e.g. A, 1, formula">

<h2>Enter Text</h2>
<textarea id="textInput" rows="5" placeholder="Write anything..."></textarea>

<button onclick="saveData()">Save</button>
<button onclick="openKey()">Open Key</button>
<button onclick="copyLink()">Copy Link</button>

<div id="linkBox"></div>
<div id="output"></div>

<script>
function saveData() {
  var key = document.getElementById("keyInput").value.trim();
  var text = document.getElementById("textInput").value;

  if (key === "") {
    alert("Enter a key");
    return;
  }

  localStorage.setItem("data_" + key, text);
  showLink(key);
  alert("Saved.");
}

function openKey() {
  var key = document.getElementById("keyInput").value.trim();
  if (key !== "") {
    location.hash = key;
    loadFromHash();
  }
}

function showLink(key) {
  var link = location.origin + location.pathname + "#" + encodeURIComponent(key);
  document.getElementById("linkBox").textContent = "Link: " + link;
}

function copyLink() {
  var key = document.getElementById("keyInput").value.trim();
  if (key === "") {
    alert("Enter a key first");
    return;
  }
  var link = location.origin + location.pathname + "#" + encodeURIComponent(key);
  navigator.clipboard.writeText(link);
  showLink(key);
  alert("Link copied to clipboard");
}

function loadFromHash() {
  var key = decodeURIComponent(location.hash.replace("#", ""));
  if (key === "") return;

  var text = localStorage.getItem("data_" + key);
  document.getElementById("keyInput").value = key;
  showLink(key);

  if (text !== null) {
    document.getElementById("output").textContent = "Text for [" + key + "]:\n\n" + text;
  } else {
    document.getElementById("output").textContent = "No text saved for [" + key + "]";
  }
}

window.addEventListener("hashchange", loadFromHash);
loadFromHash();
</script>

</body>
</html>
